[supervisord]
nodaemon=true
logfile=/dev/stdout
loglevel=info

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1920x1080x24
priority=10
autostart=true
autorestart=true

[program:fluxbox]
environment=DISPLAY=:99
command=/usr/bin/fluxbox
priority=20
autostart=true
autorestart=true

[program:vnc]
environment=DISPLAY=:99
command=/usr/bin/x11vnc -display :99 -passwd ${VNC_PASSWORD:-vncpass} -rfbport 5900 -shared -forever
priority=30
autostart=true
autorestart=true

[program:novnc]
command=websockify --web=/usr/share/novnc/ 7900 localhost:5900
priority=40
autostart=true
autorestart=true

[program:api]
environment=DISPLAY=:99
command=python -m uvicorn app.main:app --host 0.0.0.0 --port ${APP_PORT:-8000}
priority=50
autostart=true
autorestart=true
